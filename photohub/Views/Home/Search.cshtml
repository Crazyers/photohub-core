@{
    ViewBag.Title = "Search";
    ViewBag.Keywords = "Search,users,find,friends";
    ViewBag.Description = "Search page on PhotoHub";
}

@section Scripts {
    <script defer src="~/js/home/search.js"></script>
}

<div id="search" class="container is-flex is-flex-centered is-flex-column">
    <div class="field is-grouped" id="search-field">
        <p class="control is-expanded">
            <input class="input" type="text" v-on:keyup.enter="handleSearch" v-model="searchString" placeholder="Enter login or name" required>
        </p>
        <p class="control">
            <button class="button is-warning" title="Search" v-bind:class="{'is-loading': incallback}" v-on:submit.prevent="handleSearch" v-on:submit="handleSearch" v-on:click="handleSearch">
                Search
            </button>
        </p>
    </div>

    <div class="is-flex is-flex-centered is-flex-wrap search-element" v-for="user in users" v-if="users != null || users.length > 0" v-cloak>
        <a v-bind:href="`/users/${user.userName}`" class="button is-white is-flex is-flex-centered" v-bind:title="user.userName" style="justify-content: space-between !important; height: 100%;">
            <img class="image is-64x64 is-circle" v-bind:src="user.avatar" v-bind:alt="user.userName" style="margin-right: 7px;"/>
            <span class="is-doted-end is-size-5">{{user.userName}}</span>
        </a>
        <button class="button" v-bind:title="user.followed?'Unfollow':'Follow'" v-bind:class="{'is-warning': !user.followed}" v-on:click="user.followed?disfollow(user):follow(user)"><i class="fas fa-user-plus" v-bind:class="user.followed?'fa-user-times':'fa-user-plus'"></i></button>
    </div>
    
    <!-- Empty -->
    <div class="empty-container" v-if="users == null || users.length <= 0" v-cloak>
        <p>Can't find user</p>
    </div>

    <button class="button is-uppercase is-responsive" v-bind:class="{'is-loading': incallback}" v-on:click="search" v-if="!usersLoaded && users.length > 0 && users.length%12 == 0" v-cloak>Load More</button>
</div>